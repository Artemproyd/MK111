@echo off
chcp 65001 > nul
title Компилятор: Лексический + Синтаксический анализатор
color 0A

echo.
echo ==========================================
echo    КОМПИЛЯТОР - МЕТОДЫ КОМПИЛЯЦИИ
echo ==========================================
echo    Лексический анализатор (конечный автомат)
echo    Синтаксический анализатор (магазинный автомат + ОПС)
echo ==========================================
echo.

echo 🔨 Сборка проекта...
cd build
cmake .. -G "MinGW Makefiles"
if errorlevel 1 (
    echo ❌ Ошибка при генерации проекта
    pause
    exit /b 1
)

mingw32-make
if errorlevel 1 (
    echo ❌ Ошибка при компиляции
    pause
    exit /b 1
)

cd ..
echo ✅ Сборка завершена успешно!
echo.

echo 🚀 Запуск анализатора...
echo.
syntax_analyzer.exe

echo.
echo ==========================================
echo Программа завершена. Нажмите любую клавишу...
pause > nul 